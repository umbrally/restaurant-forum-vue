(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ab43a"],{1511:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container py-5"},[r("UserProfileCard",{attrs:{"initial-user-profile":e.userProfile,"current-user":e.currentUser},on:{"after-add-following":e.addFollowing,"after-delete-following":e.deleteFollowing}}),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-4"},[r("UserFollowingsCard",{attrs:{"user-followings":e.userFollowings}}),r("br"),r("UserFollowersCard",{attrs:{"user-followers":e.userFollowers}})],1),r("div",{staticClass:"col-md-8"},[r("UserCommentsCard",{attrs:{comments:e.commentRestaurants}}),r("br"),r("UserFavoritedRestaurantsCard",{attrs:{"favorited-restaurants":e.favoritedRestaurants}})],1)])],1)},i=[],a=(r("8e6e"),r("ac6a"),r("456d"),r("7f7f"),r("96cf"),r("3b8d")),n=r("bd86"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card mb-3"},[r("div",{staticClass:"row no-gutters"},[r("div",{staticClass:"col-md-4"},[r("img",{attrs:{src:e._f("emptyImage")(e.userProfile.image),width:"300px",height:"300px"}})]),r("div",{staticClass:"col-md-8"},[r("div",{staticClass:"card-body"},[r("h5",{staticClass:"card-title"},[e._v(e._s(e.userProfile.name))]),r("p",{staticClass:"card-text"},[e._v(e._s(e.userProfile.email))]),r("ul",{staticClass:"list-unstyled list-inline"},[r("li",[r("strong",[e._v(e._s(e.userProfile.commentCounts))]),e._v(" 已評論餐廳\n          ")]),r("li",[r("strong",[e._v(e._s(e.userProfile.favoritedRestaurantsCounts))]),e._v(" 收藏的餐廳\n          ")]),r("li",[r("strong",[e._v(e._s(e.userProfile.followingsCounts))]),e._v(" followings (追蹤者)\n          ")]),r("li",[r("strong",[e._v(e._s(e.userProfile.followersCounts))]),e._v(" followers (追隨者)\n          ")])]),r("p"),e.userProfile.id===e.currentUser.id?[r("router-link",{staticClass:"btn btn-danger btn-border mr-2",attrs:{to:{name:"user-edit",params:{id:e.currentUser.id}}}},[e._v("Edit")])]:[e.userProfile.isFollowed?r("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.deleteFollowing(e.userProfile.id)}}},[e._v("取消追蹤")]):r("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.addFollowing(e.userProfile.id)}}},[e._v("追蹤")])],r("p")],2)])])])},l=[],u=r("2708"),c=r("4cce"),d=r("2fa3");function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(r,!0).forEach(function(t){Object(n["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var m={mixins:[u["a"]],props:{initialUserProfile:{type:Object,required:!0},currentUser:{type:Object,required:!0}},data:function(){return{userProfile:this.initialUserProfile,currentUser:this.currentUser}},methods:{addFollowing:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var r,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c["a"].addFollowing({userId:t});case 3:if(r=e.sent,s=r.data,i=r.statusText,"OK"===i&&"success"===s.status){e.next=8;break}throw new Error(i);case 8:this.userProfile=p({},this.userProfile,{isFollowed:!0}),this.$emit("after-add-following"),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),d["a"].fire({icon:"error",title:"無法追蹤，請稍後再試"});case 15:case"end":return e.stop()}},e,this,[[0,12]])}));function t(t){return e.apply(this,arguments)}return t}(),deleteFollowing:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var r,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c["a"].deleteFollowing({userId:t});case 3:if(r=e.sent,s=r.data,i=r.statusText,"OK"===i&&"success"===s.status){e.next=8;break}throw new Error(i);case 8:this.userProfile=p({},this.userProfile,{isFollowed:!1}),this.$emit("after-delete-following"),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),d["a"].fire({icon:"error",title:"無法取消追蹤，請稍後再試"});case 15:case"end":return e.stop()}},e,this,[[0,12]])}));function t(t){return e.apply(this,arguments)}return t}()}},w=m,h=r("2877"),v=Object(h["a"])(w,o,l,!1,null,null,null),g=v.exports,b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[e._v(e._s(e.userFollowings.length))]),e._v(" followings (追蹤者)\n  ")]),r("div",{staticClass:"card-body"},e._l(e.userFollowings,function(e){return r("router-link",{key:e.id,attrs:{to:{name:"user",params:{id:e.id}}}},[r("img",{staticClass:"avatar mr-1",attrs:{src:e.image,width:"60",height:"60"}})])}),1)])},C=[],O={props:{userFollowings:{type:Object,required:!0}}},P=O,_=Object(h["a"])(P,b,C,!1,null,null,null),y=_.exports,F=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[e._v(e._s(e.userFollowers.length))]),e._v(" followers (追隨者)\n  ")]),r("div",{staticClass:"card-body"},e._l(e.userFollowers,function(e){return r("router-link",{key:e.id,attrs:{to:{name:"user",params:{id:e.id}}}},[r("img",{staticClass:"avatar mr-1",attrs:{src:e.image,width:"60",height:"60"}})])}),1)])},j=[],U={props:{userFollowers:{type:Object,required:!0}}},k=U,x=Object(h["a"])(k,F,j,!1,null,null,null),R=x.exports,D=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[e._v(e._s(e.comments.length))]),e._v(" 已評論餐廳\n  ")]),r("div",{staticClass:"card-body"},e._l(e.comments,function(e){return r("router-link",{key:e.id,attrs:{to:{name:"restaurant",params:{id:e.RestaurantId}}}},[r("img",{staticClass:"avatar mr-1",attrs:{src:e.Restaurant.image,width:"60",height:"60"}})])}),1)])},E=[],$={props:{comments:{type:Object,required:!0}}},I=$,q=Object(h["a"])(I,D,E,!1,null,null,null),A=q.exports,S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[e._v(e._s(e.favoritedRestaurants.length))]),e._v(" 收藏的餐廳\n  ")]),r("div",{staticClass:"card-body"},e._l(e.favoritedRestaurants,function(e){return r("router-link",{key:e.id,attrs:{to:{name:"restaurant",params:{id:e.id}}}},[r("img",{staticClass:"avatar mr-1",attrs:{src:e.image,width:"60",height:"60"}})])}),1)])},K=[],T={props:{favoritedRestaurants:{type:Object,required:!0}}},J=T,z=Object(h["a"])(J,S,K,!1,null,null,null),B=z.exports,G=r("2f62");function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(r,!0).forEach(function(t){Object(n["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var M={components:{UserProfileCard:g,UserFollowingsCard:y,UserFollowersCard:R,UserCommentsCard:A,UserFavoritedRestaurantsCard:B},data:function(){return{userProfile:{id:-1,name:"",email:"",image:"",commentCounts:0,favoritedRestaurantsCounts:0,followingsCounts:0,followersCounts:0,isFollowed:!1},userFollowings:[],userFollowers:[],commentRestaurants:[],favoritedRestaurants:[]}},created:function(){var e=this.$route.params.id;this.fetchUser(e)},computed:L({},Object(G["b"])(["currentUser"])),beforeRouteUpdate:function(e,t,r){var s=e.params.id;this.fetchUser(s),r()},methods:{fetchUser:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var r,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c["a"].get({userId:t});case 3:if(r=e.sent,s=r.data,i=r.statusText,"OK"===i){e.next=8;break}throw new Error(i);case 8:this.userProfile.id=s.profile.id,this.userProfile.name=s.profile.name,this.userProfile.email=s.profile.email,this.userProfile.image=s.profile.image,this.userProfile.commentCounts=s.profile.Comments.length,this.userProfile.favoritedRestaurantsCounts=s.profile.FavoritedRestaurants.length,this.userProfile.followingsCounts=s.profile.Followings.length,this.userProfile.followersCounts=s.profile.Followers.length,this.userProfile.isFollowed=s.isFollowed,this.userFollowings=s.profile.Followings,this.userFollowers=s.profile.Followers,this.commentRestaurants=s.profile.Comments,this.favoritedRestaurants=s.profile.FavoritedRestaurants,e.next=26;break;case 23:e.prev=23,e.t0=e["catch"](0),d["a"].fire({icon:"error",title:"無法獲得使用者資訊，請稍後再試"});case 26:case"end":return e.stop()}},e,this,[[0,23]])}));function t(t){return e.apply(this,arguments)}return t}(),addFollowing:function(){this.userFollowers.push(L({},this.currentUser,{password:"",createdAt:new Date,updatedAt:new Date,Followship:{followerId:this.currentUser.id,followingId:this.userProfile.id,createdAt:new Date,updatedAt:new Date}}))},deleteFollowing:function(){var e=this;this.userFollowers=this.userFollowers.filter(function(t){return t.id!==e.currentUser.id})}}},N=M,Q=Object(h["a"])(N,s,i,!1,null,null,null);t["default"]=Q.exports}}]);
//# sourceMappingURL=chunk-2d0ab43a.7ab8c27b.js.map